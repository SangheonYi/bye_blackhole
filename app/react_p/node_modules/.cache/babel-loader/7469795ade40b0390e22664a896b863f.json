{"ast":null,"code":"import _slicedToArray from\"/Users/jinkim/ts_5/app/react_p/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import socketIOClient from\"socket.io-client\";import ChatInput from\"./ChatInput\";import ChatLog from\"./ChatLog\";import Loading from\"./Loading\";//const socket = socketIOClient(\"localhost:5000\");\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Chat=function Chat(_ref){var roomName=_ref.roomName,userName=_ref.userName;var myInfo={roomName:roomName?roomName:localStorage.getItem(\"roomName\"),userName:userName?userName:localStorage.getItem(\"userName\")};var _useState=useState(socketIOClient()),_useState2=_slicedToArray(_useState,2),currentSocket=_useState2[0],setCurrentSocket=_useState2[1];useEffect(function(){setCurrentSocket(socketIOClient(\"localhost:80\"));},[]);if(currentSocket){currentSocket.on(\"connect\",function(){currentSocket.emit(\"join\",myInfo);});}return/*#__PURE__*/_jsx(\"div\",{children:currentSocket?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ChatLog,{socket:currentSocket}),/*#__PURE__*/_jsx(ChatInput,{userName:userName,socket:currentSocket})]}):/*#__PURE__*/_jsx(Loading,{})});};export default Chat;","map":{"version":3,"sources":["/Users/jinkim/ts_5/app/react_p/src/Chat/Chat.tsx"],"names":["React","useEffect","useState","socketIOClient","ChatInput","ChatLog","Loading","Chat","roomName","userName","myInfo","localStorage","getItem","currentSocket","setCurrentSocket","on","emit"],"mappings":"qJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA;6IAOA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAqC,IAAlCC,CAAAA,QAAkC,MAAlCA,QAAkC,CAAxBC,QAAwB,MAAxBA,QAAwB,CAChD,GAAMC,CAAAA,MAAM,CAAG,CACbF,QAAQ,CAAEA,QAAQ,CAAGA,QAAH,CAAcG,YAAY,CAACC,OAAb,CAAqB,UAArB,CADnB,CAEbH,QAAQ,CAAEA,QAAQ,CAAGA,QAAH,CAAcE,YAAY,CAACC,OAAb,CAAqB,UAArB,CAFnB,CAAf,CADgD,cAMNV,QAAQ,CAACC,cAAc,EAAf,CANF,wCAMzCU,aANyC,eAM1BC,gBAN0B,eAQhDb,SAAS,CAAC,UAAM,CACda,gBAAgB,CAACX,cAAc,CAAC,cAAD,CAAf,CAAhB,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAIU,aAAJ,CAAmB,CACjBA,aAAa,CAACE,EAAd,CAAiB,SAAjB,CAA4B,UAAM,CAChCF,aAAa,CAACG,IAAd,CAAmB,MAAnB,CAA2BN,MAA3B,EACD,CAFD,EAGD,CAED,mBACE,qBACGG,aAAa,cACZ,wCACE,KAAC,OAAD,EAAS,MAAM,CAAEA,aAAjB,EADF,cAEE,KAAC,SAAD,EAAW,QAAQ,CAAEJ,QAArB,CAA+B,MAAM,CAAEI,aAAvC,EAFF,GADY,cAMZ,KAAC,OAAD,IAPJ,EADF,CAYD,CA9BD,CAgCA,cAAeN,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport ChatInput from \"./ChatInput\";\nimport ChatLog from \"./ChatLog\";\nimport Loading from \"./Loading\";\n\n//const socket = socketIOClient(\"localhost:5000\");\n\ninterface chatObj{\n\troomName: any,\n\tuserName: any\n}\n\nconst Chat = ({ roomName, userName }: chatObj) => {\n  const myInfo = {\n    roomName: roomName ? roomName : localStorage.getItem(\"roomName\"),\n    userName: userName ? userName : localStorage.getItem(\"userName\"),\n  };\n\n  const [currentSocket, setCurrentSocket] = useState(socketIOClient());\n\n  useEffect(() => {\n    setCurrentSocket(socketIOClient(\"localhost:80\"));\n  }, []);\n\n  if (currentSocket) {\n    currentSocket.on(\"connect\", () => {\n      currentSocket.emit(\"join\", myInfo);\n    });\n  }\n\n  return (\n    <div>\n      {currentSocket ? (\n        <>\n          <ChatLog socket={currentSocket}></ChatLog>\n          <ChatInput userName={userName} socket={currentSocket}></ChatInput>\n        </>\n      ) : (\n        <Loading></Loading>\n      )}\n    </div>\n  );\n};\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}