{"ast":null,"code":"import _slicedToArray from\"/Users/jinkim/bye_blackhole/app/react_p/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import socketIOClient from\"socket.io-client\";import ChatInput from\"./ChatInput\";import ChatLog from\"./ChatLog\";import Loading from\"./Loading\";import UserList from\"./UserList\";import\"./Chat.css\";//const socket = socketIOClient(\"localhost:5000\");\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Chat=function Chat(_ref){var roomName=_ref.roomName,userName=_ref.userName;var myInfo={roomName:roomName?roomName:localStorage.getItem(\"roomName\"),userName:userName?userName:localStorage.getItem(\"userName\")};var _useState=useState(socketIOClient()),_useState2=_slicedToArray(_useState,2),currentSocket=_useState2[0],setCurrentSocket=_useState2[1];useEffect(function(){setCurrentSocket(socketIOClient(\"http://localhost:80\"));},[]);if(currentSocket){currentSocket.on(\"connect\",function(){currentSocket.emit(\"join\",myInfo);});}function AutoScroll(){var div=document.getElementById(\"scrollDiv\");div.scrollTop=div.scrollHeight;}return/*#__PURE__*/_jsx(\"div\",{children:currentSocket?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"script\",{children:AutoScroll}),/*#__PURE__*/_jsxs(\"body\",{className:\"ChatLog-box\",children:[\"chatlog\",/*#__PURE__*/_jsx(ChatLog,{socket:currentSocket})]}),/*#__PURE__*/_jsxs(\"aside\",{className:\"UserList-box\",children:[\"userlist\",/*#__PURE__*/_jsx(UserList,{socket:currentSocket})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ChatInput-box\",children:/*#__PURE__*/_jsx(ChatInput,{userName:userName,socket:currentSocket})})]}):/*#__PURE__*/_jsx(Loading,{})});};export default Chat;","map":{"version":3,"sources":["/Users/jinkim/bye_blackhole/app/react_p/src/Chat/Chat.tsx"],"names":["React","useEffect","useState","socketIOClient","ChatInput","ChatLog","Loading","UserList","Chat","roomName","userName","myInfo","localStorage","getItem","currentSocket","setCurrentSocket","on","emit","AutoScroll","div","document","getElementById","scrollTop","scrollHeight"],"mappings":"8JAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,cAAP,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAO,YAAP,CAEA;6IAOA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAAqC,IAAlCC,CAAAA,QAAkC,MAAlCA,QAAkC,CAAxBC,QAAwB,MAAxBA,QAAwB,CAChD,GAAMC,CAAAA,MAAM,CAAG,CACbF,QAAQ,CAAEA,QAAQ,CAAGA,QAAH,CAAcG,YAAY,CAACC,OAAb,CAAqB,UAArB,CADnB,CAEbH,QAAQ,CAAEA,QAAQ,CAAGA,QAAH,CAAcE,YAAY,CAACC,OAAb,CAAqB,UAArB,CAFnB,CAAf,CADgD,cAMNX,QAAQ,CAACC,cAAc,EAAf,CANF,wCAMzCW,aANyC,eAM1BC,gBAN0B,eAQhDd,SAAS,CAAC,UAAM,CACdc,gBAAgB,CAACZ,cAAc,CAAC,qBAAD,CAAf,CAAhB,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAIW,aAAJ,CAAmB,CACjBA,aAAa,CAACE,EAAd,CAAiB,SAAjB,CAA4B,UAAM,CAChCF,aAAa,CAACG,IAAd,CAAmB,MAAnB,CAA2BN,MAA3B,EACD,CAFD,EAGD,CAED,QAASO,CAAAA,UAAT,EAAsB,CACrB,GAAIC,CAAAA,GAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CAAd,CACAF,GAAG,CAACG,SAAJ,CAAgBH,GAAG,CAACI,YAApB,CACA,CAED,mBACE,qBACGT,aAAa,cACZ,wCACJ,wBACAI,UADA,EADI,cAIJ,cAAM,SAAS,CAAC,aAAhB,kCAEM,KAAC,OAAD,EAAS,MAAM,CAAEJ,aAAjB,EAFN,GAJI,cAQJ,eAAO,SAAS,CAAC,cAAjB,mCAEA,KAAC,QAAD,EAAU,MAAM,CAAEA,aAAlB,EAFA,GARI,cAYJ,YAAK,SAAS,CAAC,eAAf,uBACM,KAAC,SAAD,EAAW,QAAQ,CAAEJ,QAArB,CAA+B,MAAM,CAAEI,aAAvC,EADN,EAZI,GADY,cAkBZ,KAAC,OAAD,IAnBJ,EADF,CAwBD,CA/CD,CAiDA,cAAeN,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport ChatInput from \"./ChatInput\";\nimport ChatLog from \"./ChatLog\";\nimport Loading from \"./Loading\";\nimport UserList from \"./UserList\";\nimport \"./Chat.css\"\n\n//const socket = socketIOClient(\"localhost:5000\");\n\ninterface chatObj{\n\troomName: any,\n\tuserName: any\n}\n\nconst Chat = ({ roomName, userName }: chatObj) => {\n  const myInfo = {\n    roomName: roomName ? roomName : localStorage.getItem(\"roomName\"),\n    userName: userName ? userName : localStorage.getItem(\"userName\"),\n  };\n\n  const [currentSocket, setCurrentSocket] = useState(socketIOClient());\n\n  useEffect(() => {\n    setCurrentSocket(socketIOClient(\"http://localhost:80\"));\n  }, []);\n\n  if (currentSocket) {\n    currentSocket.on(\"connect\", () => {\n      currentSocket.emit(\"join\", myInfo);\n    });\n  }\n\n  function AutoScroll() {\n\t  var div:any = document.getElementById(\"scrollDiv\");\n\t  div.scrollTop = div.scrollHeight;\n  }\n\n  return (\n    <div>\n      {currentSocket ? (\n        <>\n\t\t  <script>\n\t\t\t{AutoScroll}\n\t\t  </script>\n\t\t  <body className=\"ChatLog-box\">\n\t\t\t  chatlog\n          <ChatLog socket={currentSocket}></ChatLog>\n\t\t  </body>\n\t\t  <aside className=\"UserList-box\">\n\t\t\t  userlist\n\t\t  <UserList socket={currentSocket}></UserList>\n\t\t  </aside>\n\t\t  <div className=\"ChatInput-box\">\n          <ChatInput userName={userName} socket={currentSocket}></ChatInput>\n\t\t  </div>\n        </>\n      ) : (\n        <Loading></Loading>\n      )}\n    </div>\n  );\n};\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}