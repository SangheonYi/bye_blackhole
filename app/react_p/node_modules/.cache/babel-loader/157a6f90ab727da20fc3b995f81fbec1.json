{"ast":null,"code":"import _slicedToArray from\"/Users/jinkim/ts_5/app/react_p/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useRef}from'react';import{ActiveUsersListWrapper,ActiveUsersHeader,ActiveUsersOccupancy}from'./ActiveUsersList.styles';import{ActiveUser}from'../ActiveUser/ActiveUser';import{useAppState}from'../../AppStateContext';import{useScrollPosition}from'@n8tb1t/use-scroll-position';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ActiveUsersList=function ActiveUsersList(props){var _useAppState=useAppState(),state=_useAppState.state;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),stopOnScroll=_useState2[0],setStopOnScroll=_useState2[1];var activeUserEndRef=useRef(null);//This is our reference to the instance of this component in the DOM\nvar scrollToBottom=function scrollToBottom(){var _activeUserEndRef$cur;activeUserEndRef===null||activeUserEndRef===void 0?void 0:(_activeUserEndRef$cur=activeUserEndRef.current)===null||_activeUserEndRef$cur===void 0?void 0:_activeUserEndRef$cur.scrollIntoView({block:\"end\",inline:\"nearest\",behavior:\"smooth\"});};useScrollPosition(function(_ref){var prevPos=_ref.prevPos,currPos=_ref.currPos;var isShow=currPos.y>prevPos.y;console.log(\"\".concat(isShow));if(isShow!==stopOnScroll)setStopOnScroll(isShow);},[]);useEffect(scrollToBottom,[state.activeUsers]);var ActiveUsers=Array.from(state.activeUsers).map(function(activeUserName,i){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ActiveUser,{activeUser:activeUserName}),/*#__PURE__*/_jsx(\"div\",{ref:activeUserEndRef})]},i);});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ActiveUsersHeader,{children:[\"Active Users\",/*#__PURE__*/_jsx(ActiveUsersOccupancy,{children:state.presenceOccupancy})]}),/*#__PURE__*/_jsx(ActiveUsersListWrapper,{children:ActiveUsers})]});};","map":{"version":3,"sources":["/Users/jinkim/ts_5/app/react_p/src/codes/components/ActiveUsersList/ActiveUsersList.tsx"],"names":["React","useEffect","useState","useRef","ActiveUsersListWrapper","ActiveUsersHeader","ActiveUsersOccupancy","ActiveUser","useAppState","useScrollPosition","ActiveUsersList","props","state","stopOnScroll","setStopOnScroll","activeUserEndRef","scrollToBottom","current","scrollIntoView","block","inline","behavior","prevPos","currPos","isShow","y","console","log","activeUsers","ActiveUsers","Array","from","map","activeUserName","i","presenceOccupancy"],"mappings":"qJAAA,MAAOA,CAAAA,KAAP,EAA2DC,SAA3D,CAAsEC,QAAtE,CAA4FC,MAA5F,KAAyG,OAAzG,CACA,OAAQC,sBAAR,CAAgCC,iBAAhC,CAAmDC,oBAAnD,KAA8E,0BAA9E,CACA,OAAQC,UAAR,KAAyB,0BAAzB,CACA,OAAQC,WAAR,KAA0B,uBAA1B,CACA,OAAQC,iBAAR,KAAgC,6BAAhC,C,6IAMA,MAAO,IAAMC,CAAAA,eAAgD,CAAG,QAAnDA,CAAAA,eAAmD,CAACC,KAAD,CAAiC,kBAC7EH,WAAW,EADkE,CACvFI,KADuF,cACvFA,KADuF,eAEvDV,QAAQ,CAAC,KAAD,CAF+C,wCAExFW,YAFwF,eAE1EC,eAF0E,eAG/F,GAAMC,CAAAA,gBAAgB,CAAGZ,MAAM,CAAwB,IAAxB,CAA/B,CAA6D;AAE7D,GAAMa,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,2BAC3BD,gBAAgB,OAAhB,EAAAA,gBAAgB,SAAhB,+BAAAA,gBAAgB,CAAEE,OAAlB,sEAA2BC,cAA3B,CAA0C,CAAEC,KAAK,CAAE,KAAT,CAAgBC,MAAM,CAAE,SAAxB,CAAmCC,QAAQ,CAAE,QAA7C,CAA1C,EACD,CAFD,CAIAZ,iBAAiB,CAAC,cAA0B,IAAvBa,CAAAA,OAAuB,MAAvBA,OAAuB,CAAdC,OAAc,MAAdA,OAAc,CAC1C,GAAMC,CAAAA,MAAM,CAAGD,OAAO,CAACE,CAAR,CAAYH,OAAO,CAACG,CAAnC,CACAC,OAAO,CAACC,GAAR,WAAeH,MAAf,GACA,GAAIA,MAAM,GAAKX,YAAf,CAA6BC,eAAe,CAACU,MAAD,CAAf,CAC9B,CAJgB,CAId,EAJc,CAAjB,CAMAvB,SAAS,CAACe,cAAD,CAAiB,CAACJ,KAAK,CAACgB,WAAP,CAAjB,CAAT,CAEA,GAAMC,CAAAA,WAAW,CAAGC,KAAK,CAACC,IAAN,CAAWnB,KAAK,CAACgB,WAAjB,EAA8BI,GAA9B,CAAkC,SAACC,cAAD,CAAyBC,CAAzB,CAAuC,CAC3F,mBACE,MAAC,KAAD,CAAO,QAAP,yBACE,KAAC,UAAD,EAAY,UAAU,CAAED,cAAxB,EADF,cAEE,YAAK,GAAG,CAAElB,gBAAV,EAFF,GAAqBmB,CAArB,CADF,CAMD,CAPmB,CAApB,CASA,mBAAO,wCAAE,MAAC,iBAAD,wCAA+B,KAAC,oBAAD,WAAuBtB,KAAK,CAACuB,iBAA7B,EAA/B,GAAF,cAA2H,KAAC,sBAAD,WAAyBN,WAAzB,EAA3H,GAAP,CACD,CA3BM","sourcesContent":["import React, {useCallback, FunctionComponent, useReducer, useEffect, useState, useContext, useRef} from 'react'\nimport {ActiveUsersListWrapper, ActiveUsersHeader, ActiveUsersOccupancy} from './ActiveUsersList.styles'\nimport {ActiveUser} from '../ActiveUser/ActiveUser'\nimport {useAppState} from '../../AppStateContext'\nimport {useScrollPosition} from '@n8tb1t/use-scroll-position'\n\ninterface ActiveUsersListProps {\n  activeUser?: Array<any>\n}\n\nexport const ActiveUsersList: React.SFC<ActiveUsersListProps> = (props: ActiveUsersListProps) => {\n  const { state } = useAppState();\n  const [stopOnScroll, setStopOnScroll] = useState(false);\n  const activeUserEndRef = useRef<null | HTMLDivElement>(null) //This is our reference to the instance of this component in the DOM\n\n  const scrollToBottom = () => {\n    activeUserEndRef?.current?.scrollIntoView({ block: \"end\", inline: \"nearest\", behavior: \"smooth\" });\n  }\n\n  useScrollPosition(({ prevPos, currPos }) => {\n    const isShow = currPos.y > prevPos.y\n    console.log(`${isShow}`);\n    if (isShow !== stopOnScroll) setStopOnScroll(isShow)\n  }, [])\n\n  useEffect(scrollToBottom, [state.activeUsers])\n\n  const ActiveUsers = Array.from(state.activeUsers).map((activeUserName: string, i: number) => {\n    return (\n      <React.Fragment key={i}>\n        <ActiveUser activeUser={activeUserName} />\n        <div ref={activeUserEndRef} />\n      </React.Fragment>\n    );\n  });\n\n  return <><ActiveUsersHeader>Active Users<ActiveUsersOccupancy>{state.presenceOccupancy}</ActiveUsersOccupancy></ActiveUsersHeader><ActiveUsersListWrapper>{ActiveUsers}</ActiveUsersListWrapper></>\n}"]},"metadata":{},"sourceType":"module"}